<div class="overview_columns">
  
  <div class="right_column">
    <table>
      <thead>
        <tr>
          <th>Date</th>
          <th>Price</th>
          <th>Merchant</th>
          <th>Note</th>
          <th>Food</th>
          <th>Gas</th>
          <th>Pmt Method</th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% @total = 0 %>
        <% @food_total = 0 %>
        <% @gas_total = 0 %>
        <% @transactions.each do |transaction| %>
          <tr>
            <td><%= transaction.transaction_date %></td>
            <td><%= transaction.price %></td>
            <td><%= transaction.merchant %></td>
            <td><%= transaction.note %></td>
            <td><%= boolean_text(transaction.food) %></td>
            <td><%= boolean_text(transaction.gas) %></td>
            <td><%= transaction.transaction_type %></td>
            <% @total += transaction.price %>
            <% @food_total += special_amount(transaction.food, transaction.price) %>
            <% @gas_total += special_amount(transaction.gas, transaction.price) %>
          </tr>
        <% end %>
      </tbody>
    </table>
    <br>
    <h3>Total: $<%= @total %></h3>
    <br>
    <p>Food: $<%= @food_total %></p>
    <p>Gas: $<%= @gas_total %></p>
    <p>Other: $<%= @total - @gas_total - @food_total %></p>
  </div>

  <div class="left_column">
    <%= javascript_include_tag "https://www.gstatic.com/charts/loader.js" %>
    <%= pie_chart(Food:@food_total, Gas:@gas_total, Entertainment:(@total - @gas_total - @food_total)) %>
  </div>
  
</div>